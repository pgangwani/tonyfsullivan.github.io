<svelte:window on:scroll='handleScroll()' />

<nav ref:nav class='fixed top-0 w-100 pv2 bg-primary primary flex justify-end items-center { isSticky ? "sticky" : "" }'>
    <div class='bounce-xy pointer ml3 flex flex-column items-center' on:click='changeTheme()'>
        <button class='fas fa-magic fa-lg' href='#' />
        <div class='tc f7 f6-ns pt1'>Color Me</div>
    </div>  
    <div class='menu mr3 flex justify-end'>
        <div class='menu-item bb bw1 b--transparent fw4 active pv1 ph0 mv0 mh3 f4 f3-m f2-l pointer' on:click='scrollToPage("#about")'>
            About
        </div>
    </div>
</nav>

<style>
    nav.sticky {
        background-color: var(--nav-alpha);
    }

    .bounce-xy {
        animation: bounce-xy 2s infinite;
    }

    .menu {
        flex: 1;
    }

    .menu-item:hover {
        border-color: var(--color-primary);
    }

    @media only screen and (max-width: 375px) {
        nav {
            height: 4rem;
        }
    }

    @keyframes bounce-xy {
        0%, 20%, 50%, 80%, 100% {
            transform: translateY(0) translateX(0);
        }
        40% {
            transform: translateY(2px) translateX(2px);
        }
        60% {
            transform: translateY(1px) translateX(1px);
        }
    }
</style>

<script>
    import { toElement as scrollToElement } from '../_scroll';

    export default {
        data() {
            return {
                isSticky: false
            }
        },

        methods: {
            handleScroll() {
                this.set({ isSticky: window.pageYOffset > this.refs.nav.offsetTop });
            },

            scrollToPage(pageSelector) {
                const nextPage = document.querySelector(pageSelector);
                scrollToElement(nextPage);
            },

            changeTheme() {
                this.store.changeTheme();
            }
        }
    }
</script>